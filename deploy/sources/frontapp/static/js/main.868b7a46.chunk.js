(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{40:function(e,t,c){},41:function(e,t,c){},67:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(32),r=c.n(s),l=c(4),i=(c(40),c(15)),o=c(16),j=c(17),d=c(19),u=(c(41),c(42),c(2)),h=c(9),b=c.n(h),m=c(0);var x=function(e){var t,c,n,a=e.isAuthenticated,s=e.logout;return t="/login",c="login",a&&(t="/logout",c="logout",n=s),Object(m.jsx)("header",{className:"d-flex justify-content-center py-3 mt-3",children:Object(m.jsxs)("ul",{className:"nav nav-pills",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(l.b,{to:"/",className:"nav-link",children:"Index"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(l.b,{to:"/users",className:"nav-link",children:"Users"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(l.b,{to:"/category",className:"nav-link",children:"Category"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(l.b,{to:"/products",className:"nav-link",children:"Products"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(l.b,{to:t,className:"nav-link",onClick:n,children:c})}),!a&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(l.b,{to:"/register",className:"nav-link",children:"\u0417\u0430\u0440\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})})},O=function(){return Object(m.jsx)("footer",{className:"py-3 my-4",children:Object(m.jsx)("p",{className:"text-center text-muted border-top pb-3 mt-3",children:"\xa9 2021 ScriptShop"})})},p=function(){return Object(m.jsx)("h1",{children:"\u0418\u0434\u0451\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."})},f=function(e){var t=e.product;return Object(m.jsxs)("tr",{className:"product-row",children:[Object(m.jsx)("td",{children:t.id}),Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.category.name}),Object(m.jsx)("td",{children:t.created}),Object(m.jsxs)("td",{children:[t.sum," \u0440\u0443\u0431."]}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(){return function(e){var t;b.a.delete((t="products/".concat(e),"".concat("http://127.0.0.1:8000","/api/v1/").concat(t,"/"))).then((function(){alert("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u043b\u0438 \u0442\u043e\u0432\u0430\u0440!"),window.location="products"})).catch((function(e){return console.log(e)}))}(t.id)},children:"delete"})})]})},g=function(e){var t=e.products,c=e.loading;return Object(n.useEffect)((function(){document.title="\u0422\u043e\u0432\u0430\u0440\u044b"}),[]),Object(m.jsxs)(n.Fragment,{children:[Object(m.jsxs)("table",{className:"table product-list",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(m.jsx)("th",{children:"\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(m.jsx)("th",{children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043e"}),Object(m.jsx)("th",{children:"\u0421\u0443\u043c\u043c\u0430"}),Object(m.jsx)("th",{children:"actions"})]})}),Object(m.jsx)("tbody",{children:c&&Object(m.jsx)(n.Fragment,{children:t.map((function(e){return Object(m.jsx)(f,{product:e},e.name)}))})})]}),!c&&Object(m.jsx)(p,{})]})},v=function(e){var t=e.user;return Object(m.jsxs)("tr",{className:"product-row",children:[Object(m.jsx)("td",{children:Object(m.jsx)(l.b,{to:"/users/detail/".concat(t.id,"/"),children:t.id})}),Object(m.jsx)("td",{children:t.username}),Object(m.jsx)("td",{children:t.first_name})]})},N=function(e){var t=e.users,c=e.isAuthenticated,a=e.loading;return Object(n.useEffect)((function(){document.title="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),[]),c?Object(m.jsxs)("table",{className:"user-list",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"UserName"}),Object(m.jsx)("th",{children:"First_name"})]})}),Object(m.jsxs)("tbody",{children:[a&&Object(m.jsx)(n.Fragment,{children:t.map((function(e){return Object(m.jsx)(v,{user:e},e.id)}))}),!a&&Object(m.jsx)(p,{})]})]}):Object(m.jsx)("h3",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c!"})},y=function(e){var t=e.category;return Object(m.jsxs)("tr",{className:"product-row",children:[Object(m.jsx)("td",{children:Object(m.jsx)(l.c,{to:"/category/detail/".concat(t.id),children:t.name})}),Object(m.jsx)("td",{children:t.created}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{className:"btn btn-success",onClick:function(){return function(e){var t;b.a.delete((t="category/".concat(e),"".concat("http://127.0.0.1:8000","/api/v1/").concat(t,"/"))).then((function(){alert("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u043b\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e!"),window.location="category"})).catch((function(e){return console.log(e)}))}(t.id)},children:"delete"})})]})},k=function(e){var t=e.categories,c=e.loading;return Object(n.useEffect)((function(){document.title="\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),[]),Object(m.jsxs)(n.Fragment,{children:[Object(m.jsxs)("table",{className:"table category-list",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(m.jsx)("th",{children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043e"}),Object(m.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})]})}),Object(m.jsx)("tbody",{children:c&&Object(m.jsx)(n.Fragment,{children:t.map((function(e){return Object(m.jsx)(y,{category:e},e.name)}))})})]}),!c&&Object(m.jsx)(p,{})]})},S=function(e){var t=e.categories,c=Object(u.e)().id;console.log(c);var n=t.filter((function(e){return e.id===+c}))[0];return console.log(n),Object(m.jsxs)("div",{className:"project-detail",children:[Object(m.jsxs)("h2",{children:["Name: ",n.name]}),Object(m.jsxs)("p",{children:["Created: ",n.created,", Updated: ",n.updated]})]})},w=function(e){var t=e.users,c=Object(u.e)().id,n=t.filter((function(e){return e.id===+c}))[0];return Object(m.jsxs)("div",{className:"project-detail",children:[Object(m.jsxs)("h2",{children:["Username: ",n.title]}),Object(m.jsxs)("p",{children:["First name: ",n.first_name,", Last name: ",n.last_name]}),Object(m.jsxs)("p",{children:["balance: ",n.balance]}),Object(m.jsxs)("p",{children:["Phone Number: ",n.phone_number]})]})},I=function(){return Object(n.useEffect)((function(){document.title="\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),[]),Object(m.jsx)("h3",{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})},C=c(35),F=function(e){Object(j.a)(c,e);var t=Object(d.a)(c);function c(e){var n;return Object(i.a)(this,c),(n=t.call(this,e)).state={username:"",password:""},n}return Object(o.a)(c,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this;return document.title="\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",Object(m.jsx)("div",{className:"login-form",children:Object(m.jsxs)("form",{method:"post",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputUserName",className:"form-label",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"username",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",id:"exampleInputUserName",onChange:function(t){return e.handleChange(t)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputPassword",className:"form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("input",{type:"password",className:"form-control",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"exampleInputPassword",onChange:function(t){return e.handleChange(t)}})]}),Object(m.jsx)("input",{type:"submit",value:"\u0412\u043e\u0439\u0442\u0438",className:"btn btn-success"})]})})}}]),c}(a.a.Component),T=c(11),A=function(){var e=Object(n.useState)(""),t=Object(T.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),r=Object(T.a)(s,2),l=r[0],i=r[1],o=Object(n.useState)(""),j=Object(T.a)(o,2),d=j[0],u=j[1],h=Object(n.useState)(""),x=Object(T.a)(h,2),O=x[0],p=x[1],f=Object(n.useState)(""),g=Object(T.a)(f,2),v=g[0],N=g[1],y=Object(n.useState)(""),k=Object(T.a)(y,2),S=k[0],w=k[1];return Object(m.jsx)("div",{className:"login-form",children:Object(m.jsxs)("form",{method:"post",onSubmit:function(e){e.preventDefault(),b.a.post("http://127.0.0.1:8000/api/v1/register/",{username:c,password:v,first_name:d,last_name:O,email:l,phone_number:S}).then((function(e){alert("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),window.location="/login"})).catch((function(e){alert(e.response.data.username[0])}))},children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputUserName",className:"form-label",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"login",placeholder:"\u041b\u043e\u0433\u0438\u043d",id:"exampleInputUserName",onChange:function(e){a(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputFirstName",className:"form-label",children:"\u0418\u043c\u044f"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"first_name",placeholder:"\u0418\u043c\u044f",id:"exampleInputFirstName",onChange:function(e){u(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputLastName",className:"form-label",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),Object(m.jsx)("input",{type:"text",className:"form-control",name:"last_name",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",id:"exampleInputLastName",onChange:function(e){p(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputEmail",className:"form-label",children:"\u041f\u043e\u0447\u0442\u0430"}),Object(m.jsx)("input",{type:"email",className:"form-control",name:"mail",placeholder:"\u041f\u043e\u0447\u0442\u0430",id:"exampleInputEmail",onChange:function(e){i(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputPassword",className:"form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("input",{type:"password",className:"form-control",name:"password",placeholder:"password",id:"exampleInputPassword",onChange:function(e){N(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"exampleInputNumber",className:"form-label",children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}),Object(m.jsx)("input",{type:"number",className:"form-control",name:"number",placeholder:"+7 900 800 55 25",id:"exampleInputNumber",min:"10",onChange:function(e){w(e.target.value)}})]}),Object(m.jsx)("input",{type:"submit",value:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",className:"btn btn-success"})]})})},_=function(e){return"".concat("http://127.0.0.1:8000","/api/v1/").concat(e,"/")},U=function(e){Object(j.a)(c,e);var t=Object(d.a)(c);function c(e){var n;return Object(i.a)(this,c),(n=t.call(this,e)).state={products:[],categories:[],users:[],accessToken:n.getAccessToken(),loading:!1},n}return Object(o.a)(c,[{key:"componentDidMount",value:function(){this.loadState()}},{key:"loadState",value:function(){var e=this,t=this.getHeaders();b.a.get(_("users"),{headers:t}).then((function(t){e.setState({users:t.data,loading:!0})})).catch((function(e){return console.log(e)})),b.a.get(_("products"),{headers:t}).then((function(t){e.setState({products:t.data,loading:!0})})).catch((function(e){return console.log(e)})),b.a.get(_("category"),{headers:t}).then((function(t){e.setState({categories:t.data,loading:!0})})).catch((function(e){return console.log(e)}))}},{key:"login",value:function(e,t){var c=this;b.a.post(_("token"),{username:e,password:t}).then((function(e){var t=e.data.refresh,n=e.data.access;c.saveTokens(t,n,N),c.setState({accessToken:n},c.loadState),window.location="/"})).catch((function(e){return console.log(e)}))}},{key:"logout",value:function(){localStorage.setItem("refreshToken",null),localStorage.setItem("accessToken",null),this.clearState()}},{key:"clearState",value:function(){this.setState({accessToken:null,users:[],projects:[],tasks:[],loading:!1})}},{key:"saveTokens",value:function(e,t){localStorage.setItem("refreshToken",e),localStorage.setItem("accessToken",t)}},{key:"getAccessToken",value:function(){return localStorage.getItem("accessToken")}},{key:"isAuthenticated",value:function(){return"null"!==this.state.accessToken&&null!==this.state.accessToken}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuthenticated()&&(e.Authorization="Bearer ".concat(this.state.accessToken)),e}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(x,{isAuthenticated:this.isAuthenticated(),logout:function(){return e.logout()}}),Object(m.jsx)(u.a,{exact:!0,path:"/",children:Object(m.jsx)(I,{})}),Object(m.jsx)(u.a,{exact:!0,path:"/category",children:Object(m.jsx)(k,{categories:this.state.categories,loading:this.state.loading})}),Object(m.jsx)(u.a,{exact:!0,path:"/category/detail/:id",children:Object(m.jsx)(S,{categories:this.state.categories})}),Object(m.jsx)(u.a,{exact:!0,path:"/users",children:Object(m.jsx)(N,{users:this.state.users,isAuthenticated:this.isAuthenticated(),loading:this.state.loading})}),Object(m.jsx)(u.a,{exact:!0,path:"/users/detail/:id",children:Object(m.jsx)(w,{users:this.state.users})}),Object(m.jsx)(u.a,{exact:!0,path:"/products/",children:Object(m.jsx)(g,{products:this.state.products,loading:this.state.loading})}),Object(m.jsx)(u.a,{exact:!0,path:"/login",children:Object(m.jsx)(F,{login:function(t,c){return e.login(t,c)}})}),Object(m.jsx)(u.a,{exact:!0,path:"/register",children:Object(m.jsx)(A,{login:function(t,c){return e.register(t,c)}})}),Object(m.jsx)(O,{})]})}}]),c}(a.a.Component);r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(l.a,{children:Object(m.jsx)(U,{})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.868b7a46.chunk.js.map